(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(4510)}])},4270:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(3759).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4456:function(e,s,t){"use strict";t.d(s,{_:function(){return d}});var r=t(5893),l=t(7294),a=t(5320),n=l.forwardRef((e,s)=>(0,r.jsx)(a.WV.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));n.displayName="Label";var i=t(2003),c=t(5156);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,r.jsx)(n,{ref:s,className:(0,c.cn)(o(),t),...l})});d.displayName=n.displayName},3517:function(e,s,t){"use strict";t.d(s,{SP:function(){return o},dr:function(){return c},mQ:function(){return i},nU:function(){return d}});var r=t(5893),l=t(7294),a=t(2270),n=t(5156);let i=a.fC,c=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,r.jsx)(a.aV,{ref:s,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...l})});c.displayName=a.aV.displayName;let o=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,r.jsx)(a.xz,{ref:s,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...l})});o.displayName=a.xz.displayName;let d=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,r.jsx)(a.VY,{ref:s,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...l})});d.displayName=a.VY.displayName},4510:function(e,s,t){"use strict";let r;t.r(s),t.d(s,{default:function(){return q}});var l=t(5893),a=t(7294),n=t(1163),i=t(9681),c=t(9200),o=t(4270),d=t(3759);let u=(0,d.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),x=(0,d.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),h=(0,d.Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),m=(0,d.Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);var f=t(493),j=t(39),g=t(4976),v=t(5928),p=t(7864);let w=(0,d.Z)("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),y=(0,d.Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),N=(0,d.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var k=t(2798),b=t(837),S=t(9475);let C=(0,d.Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),R=(0,d.Z)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);var E=t(3765),D=t(3973),P=t(7738);let{useDebugValue:z}=a,{useSyncExternalStoreWithSelector:A}=P,F=!1,T=e=>e,Z=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let s="function"==typeof e?(0,D.M)(e):e,t=(e,t)=>(function(e,s=T,t){t&&!F&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),F=!0);let r=A(e.subscribe,e.getState,e.getServerState||e.getInitialState,s,t);return z(r),r})(s,e,t);return Object.assign(t,s),t},M=(r=(e,s)=>({isProcessing:!1,lastResult:null,error:null,processingHistory:[],triggerScheduler:async s=>{e({isProcessing:!0,error:null});try{let t=await k.x.triggerScheduler(s);e(e=>({lastResult:t,processingHistory:[t,...e.processingHistory.slice(0,9)],isProcessing:!1,error:null}))}catch(s){var t,r;throw e({isProcessing:!1,error:(null===(r=s.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.error)||"Failed to trigger scheduler"}),s}},triggerRedisScheduler:async s=>{e({isProcessing:!0,error:null});try{let t=await k.x.triggerRedisScheduler(s);e(e=>({lastResult:t,processingHistory:[t,...e.processingHistory.slice(0,9)],isProcessing:!1,error:null}))}catch(s){var t,r;throw e({isProcessing:!1,error:(null===(r=s.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.error)||"Failed to trigger Redis scheduler"}),s}},triggerMongoScheduler:async s=>{e({isProcessing:!0,error:null});try{let t=await k.x.triggerMongoScheduler(s);e(e=>({lastResult:t,processingHistory:[t,...e.processingHistory.slice(0,9)],isProcessing:!1,error:null}))}catch(s){var t,r;throw e({isProcessing:!1,error:(null===(r=s.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.error)||"Failed to trigger MongoDB scheduler"}),s}},triggerCronScheduler:async()=>{e({isProcessing:!0,error:null});try{let s=await k.x.triggerCronScheduler();e(e=>({lastResult:s,processingHistory:[s,...e.processingHistory.slice(0,9)],isProcessing:!1,error:null}))}catch(r){var s,t;throw e({isProcessing:!1,error:(null===(t=r.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.error)||"Failed to trigger cron scheduler"}),r}},clearError:()=>{e({error:null})},clearHistory:()=>{e({processingHistory:[]})}}))?Z(r):Z;var I=t(8778),V=t(9346),O=t(4109),_=t(8860),W=t(4456),Q=t(4350),L=t(6501);function H(){let{isProcessing:e,lastResult:s,error:t,processingHistory:r,triggerScheduler:n,triggerRedisScheduler:c,triggerMongoScheduler:o,triggerCronScheduler:d,clearError:u,clearHistory:x}=M(),[h,v]=(0,a.useState)({maxTasks:10,processRetryQueue:!0,runId:""}),p=async()=>{try{await n(h),L.Am.success("Scheduler triggered successfully")}catch(e){L.Am.error("Failed to trigger scheduler")}},w=async()=>{try{await c(h),L.Am.success("Redis scheduler triggered successfully")}catch(e){L.Am.error("Failed to trigger Redis scheduler")}},y=async()=>{try{await o(h),L.Am.success("MongoDB scheduler triggered successfully")}catch(e){L.Am.error("Failed to trigger MongoDB scheduler")}},N=async()=>{try{await d(),L.Am.success("Cron scheduler triggered successfully")}catch(e){L.Am.error("Failed to trigger cron scheduler")}},k=e=>{switch(e){case"processed":case"processed_stuck":return(0,l.jsx)(f.Z,{className:"h-4 w-4 text-green-500"});case"error":case"error_stuck":return(0,l.jsx)(S.Z,{className:"h-4 w-4 text-red-500"});default:return(0,l.jsx)(C,{className:"h-4 w-4 text-blue-500"})}},b=e=>{let s={processed:{color:"bg-green-500",text:"Processed"},error:{color:"bg-red-500",text:"Error"},processed_stuck:{color:"bg-yellow-500",text:"Stuck Fixed"},error_stuck:{color:"bg-orange-500",text:"Stuck Error"}},t=s[e]||s.error;return(0,l.jsx)(O.C,{className:"".concat(t.color," text-white text-xs"),children:t.text})};return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)(V.Zb,{children:[(0,l.jsx)(V.Ol,{children:(0,l.jsxs)(V.ll,{className:"flex items-center space-x-2",children:[(0,l.jsx)(j.Z,{className:"h-5 w-5"}),(0,l.jsx)("span",{children:"Scheduler Controls"})]})}),(0,l.jsxs)(V.aY,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(W._,{htmlFor:"maxTasks",children:"Max Tasks"}),(0,l.jsx)(_.I,{id:"maxTasks",type:"number",value:h.maxTasks,onChange:e=>v(s=>({...s,maxTasks:parseInt(e.target.value)||10})),min:"1",max:"50"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(W._,{htmlFor:"processRetryQueue",children:"Process Retry Queue"}),(0,l.jsxs)(Q.Ph,{value:h.processRetryQueue.toString(),onValueChange:e=>v(s=>({...s,processRetryQueue:"true"===e})),children:[(0,l.jsx)(Q.i4,{children:(0,l.jsx)(Q.ki,{})}),(0,l.jsxs)(Q.Bw,{children:[(0,l.jsx)(Q.Ql,{value:"true",children:"Yes"}),(0,l.jsx)(Q.Ql,{value:"false",children:"No"})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(W._,{htmlFor:"runId",children:"Run ID (Optional)"}),(0,l.jsx)(_.I,{id:"runId",value:h.runId,onChange:e=>v(s=>({...s,runId:e.target.value})),placeholder:"Specific run ID"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-2",children:[(0,l.jsxs)(I.z,{onClick:p,disabled:e,className:"w-full",children:[(0,l.jsx)(m,{className:"mr-2 h-4 w-4"}),e?"Processing...":"Main Scheduler"]}),(0,l.jsxs)(I.z,{onClick:w,disabled:e,variant:"outline",className:"w-full",children:[(0,l.jsx)(R,{className:"mr-2 h-4 w-4"}),"Redis Scheduler"]}),(0,l.jsxs)(I.z,{onClick:y,disabled:e,variant:"outline",className:"w-full",children:[(0,l.jsx)(R,{className:"mr-2 h-4 w-4"}),"MongoDB Scheduler"]}),(0,l.jsxs)(I.z,{onClick:N,disabled:e,variant:"outline",className:"w-full",children:[(0,l.jsx)(g.Z,{className:"mr-2 h-4 w-4"}),"Cron Scheduler"]})]}),t&&(0,l.jsxs)(i.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center space-x-2 p-3 bg-red-50 border border-red-200 rounded-md",children:[(0,l.jsx)(E.Z,{className:"h-4 w-4 text-red-500"}),(0,l.jsx)("span",{className:"text-red-700 text-sm",children:t}),(0,l.jsx)(I.z,{variant:"ghost",size:"sm",onClick:u,children:(0,l.jsx)(S.Z,{className:"h-4 w-4"})})]})]})]}),s&&(0,l.jsxs)(V.Zb,{children:[(0,l.jsx)(V.Ol,{children:(0,l.jsxs)(V.ll,{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{children:"Last Scheduler Run"}),(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:new Date(s.timestamp).toLocaleString()})]})}),(0,l.jsxs)(V.aY,{children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-green-600",children:s.processedTasks}),(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:"Processed Tasks"})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:s.redisTasksProcessed}),(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:"Redis Tasks"})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:s.pendingTasksFound}),(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:"Pending Found"})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:s.stuckTasksFound}),(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:"Stuck Found"})]})]}),s.results.length>0&&(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("h4",{className:"font-medium",children:"Task Results:"}),(0,l.jsx)("div",{className:"max-h-40 overflow-y-auto space-y-1",children:s.results.map((e,s)=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted rounded text-sm",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[k(e.status),(0,l.jsx)("span",{className:"font-mono",children:e.taskId}),e.nodeId&&(0,l.jsxs)("span",{className:"text-muted-foreground",children:["(",e.nodeId,")"]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[b(e.status),(0,l.jsx)(O.C,{variant:"outline",className:"text-xs",children:e.source})]})]},s))})]})]})]}),r.length>0&&(0,l.jsxs)(V.Zb,{children:[(0,l.jsx)(V.Ol,{children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(V.ll,{children:"Processing History"}),(0,l.jsx)(I.z,{variant:"outline",size:"sm",onClick:x,children:"Clear History"})]})}),(0,l.jsx)(V.aY,{children:(0,l.jsx)("div",{className:"space-y-2",children:r.slice(0,5).map((e,s)=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium",children:new Date(e.timestamp).toLocaleTimeString()}),(0,l.jsxs)("span",{className:"text-sm text-muted-foreground",children:[e.processedTasks," tasks processed"]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsxs)(O.C,{variant:"outline",className:"text-xs",children:[e.redisTasksProcessed," Redis"]}),(0,l.jsxs)(O.C,{variant:"outline",className:"text-xs",children:[e.pendingTasksFound," Pending"]})]})]},s))})})]})]})}var Y=t(2378),U=t(3517),B=t(1571);function q(){let e=(0,n.useRouter)(),{theme:s,setTheme:t}=(0,B.F)(),{user:r,logout:d}=(0,b.a)(),[S,C]=(0,a.useState)({totalWorkflows:0,totalRuns:0,successRate:0,avgTaskDuration:0}),[R,E]=(0,a.useState)([]),[D,P]=(0,a.useState)([]),[z,A]=(0,a.useState)(!0),[F,T]=(0,a.useState)({workflow:"",status:"",search:""}),[Z,M]=(0,a.useState)([]),[W,q]=(0,a.useState)(!1),[G,X]=(0,a.useState)("overview");(0,a.useEffect)(()=>{J()},[]);let J=async()=>{try{var e;A(!0);let[s,t,r]=await Promise.all([k.x.getRuns(void 0,1,10),k.x.getWorkflows(1,100),k.x.getSystemMetrics()]);E((null==s?void 0:s.data)||[]),P((null==t?void 0:t.data)||[]),C({totalWorkflows:(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.length)||0,totalRuns:(null==r?void 0:r.totalRuns)||0,successRate:(null==r?void 0:r.successRate)||0,avgTaskDuration:(null==r?void 0:r.avgTaskDuration)||0})}catch(e){console.error("Failed to load dashboard data:",e),E([]),P([]),C({totalWorkflows:0,totalRuns:0,successRate:0,avgTaskDuration:0})}finally{A(!1)}},K=e=>{let s={SUCCESS:{color:"bg-green-500",text:"Success"},RUNNING:{color:"bg-yellow-500",text:"Running"},FAILED:{color:"bg-red-500",text:"Failed"},PENDING:{color:"bg-gray-500",text:"Pending"},CANCELED:{color:"bg-gray-400",text:"Canceled"}},t=s[e]||s.PENDING;return(0,l.jsx)(O.C,{className:"".concat(t.color," text-white"),children:t.text})},$=(e,s)=>{if(!s)return"Running...";let t=Math.floor((new Date(s).getTime()-new Date(e).getTime())/1e3);return t<60?"".concat(t,"s"):"".concat(Math.floor(t/60),"m ").concat(t%60,"s")},ee=e=>{M(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},es=async()=>{if(0!==Z.length&&confirm("Are you sure you want to delete ".concat(Z.length," workflow(s)? This action cannot be undone.")))try{q(!0),await k.x.deleteWorkflows(Z),L.Am.success("Successfully deleted ".concat(Z.length," workflow(s)")),M([]),J()}catch(e){console.error("Failed to delete workflows:",e),L.Am.error("Failed to delete workflows")}finally{q(!1)}},et=async e=>{try{await k.x.triggerRun(e,{}),L.Am.success("Workflow triggered successfully!"),J()}catch(e){console.error("Failed to trigger workflow:",e),L.Am.error("Failed to trigger workflow")}},er=(R||[]).filter(e=>{var s;return(!F.workflow||"all"===F.workflow||(null===(s=e.workflow)||void 0===s?void 0:s.name)===F.workflow)&&(!F.status||"all"===F.status||e.status===F.status)&&(!F.search||!!e.id.toLowerCase().includes(F.search.toLowerCase()))});return(0,l.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,l.jsx)("header",{className:"border-b border-border/40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,l.jsxs)("div",{className:"container flex h-16 items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"FlowForge"}),(0,l.jsx)(I.z,{variant:"outline",size:"sm",onClick:()=>t("dark"===s?"light":"dark"),children:"dark"===s?"\uD83C\uDF1E":"\uD83C\uDF19"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsxs)(I.z,{variant:"outline",size:"sm",onClick:()=>e.push("/dlq"),children:[(0,l.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"Dead Letter Queue"]}),(0,l.jsxs)(I.z,{variant:"outline",size:"sm",onClick:()=>e.push("/workflow/new"),children:[(0,l.jsx)(o.Z,{className:"mr-2 h-4 w-4"}),"Create Workflow"]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[(0,l.jsx)(u,{className:"h-4 w-4"}),(0,l.jsx)("span",{children:null==r?void 0:r.email})]}),(0,l.jsxs)(I.z,{variant:"outline",size:"sm",onClick:d,children:[(0,l.jsx)(x,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]})}),(0,l.jsx)("div",{className:"container mx-auto p-6 space-y-6",children:(0,l.jsxs)(U.mQ,{value:G,onValueChange:X,className:"space-y-6",children:[(0,l.jsxs)(U.dr,{className:"grid w-full grid-cols-3",children:[(0,l.jsx)(U.SP,{value:"overview",children:"Overview"}),(0,l.jsx)(U.SP,{value:"scheduler",children:"Scheduler"}),(0,l.jsx)(U.SP,{value:"workflows",children:"Workflows"})]}),(0,l.jsxs)(U.nU,{value:"overview",className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,l.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,l.jsxs)(V.Zb,{children:[(0,l.jsxs)(V.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(V.ll,{className:"text-sm font-medium",children:"Total Workflows"}),(0,l.jsx)(h,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsxs)(V.aY,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:S.totalWorkflows}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Active workflows"})]})]})}),(0,l.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,l.jsxs)(V.Zb,{children:[(0,l.jsxs)(V.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(V.ll,{className:"text-sm font-medium",children:"Total Runs"}),(0,l.jsx)(m,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsxs)(V.aY,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:S.totalRuns}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"All time executions"})]})]})}),(0,l.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,l.jsxs)(V.Zb,{children:[(0,l.jsxs)(V.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(V.ll,{className:"text-sm font-medium",children:"Success Rate"}),(0,l.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsxs)(V.aY,{children:[(0,l.jsxs)("div",{className:"text-2xl font-bold",children:[S.successRate.toFixed(1),"%"]}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Successful executions"})]})]})}),(0,l.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:(0,l.jsxs)(V.Zb,{children:[(0,l.jsxs)(V.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(V.ll,{className:"text-sm font-medium",children:"Avg Task Duration"}),(0,l.jsx)(j.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsxs)(V.aY,{children:[(0,l.jsxs)("div",{className:"text-2xl font-bold",children:[S.avgTaskDuration.toFixed(1),"s"]}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Average execution time"})]})]})})]}),(0,l.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:(0,l.jsxs)(V.Zb,{children:[(0,l.jsx)(V.Ol,{children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(V.ll,{children:"Recent Runs"}),(0,l.jsxs)(I.z,{variant:"outline",size:"sm",onClick:J,children:[(0,l.jsx)(g.Z,{className:"mr-2 h-4 w-4"}),"Refresh"]})]})}),(0,l.jsxs)(V.aY,{children:[(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)(_.I,{placeholder:"Search by Run ID...",value:F.search,onChange:e=>T(s=>({...s,search:e.target.value})),className:"max-w-sm"})}),(0,l.jsxs)(Q.Ph,{value:F.workflow,onValueChange:e=>T(s=>({...s,workflow:e})),children:[(0,l.jsx)(Q.i4,{className:"w-[180px]",children:(0,l.jsx)(Q.ki,{placeholder:"All Workflows"})}),(0,l.jsxs)(Q.Bw,{children:[(0,l.jsx)(Q.Ql,{value:"all",children:"All Workflows"}),D.map(e=>(0,l.jsx)(Q.Ql,{value:e.name,children:e.name},e.id))]})]}),(0,l.jsxs)(Q.Ph,{value:F.status,onValueChange:e=>T(s=>({...s,status:e})),children:[(0,l.jsx)(Q.i4,{className:"w-[180px]",children:(0,l.jsx)(Q.ki,{placeholder:"All Status"})}),(0,l.jsxs)(Q.Bw,{children:[(0,l.jsx)(Q.Ql,{value:"all",children:"All Status"}),(0,l.jsx)(Q.Ql,{value:"SUCCESS",children:"Success"}),(0,l.jsx)(Q.Ql,{value:"RUNNING",children:"Running"}),(0,l.jsx)(Q.Ql,{value:"FAILED",children:"Failed"}),(0,l.jsx)(Q.Ql,{value:"PENDING",children:"Pending"}),(0,l.jsx)(Q.Ql,{value:"CANCELED",children:"Canceled"})]})]})]}),(0,l.jsx)("div",{className:"rounded-md border min-w-full overflow-x-auto",children:(0,l.jsxs)(Y.iA,{children:[(0,l.jsx)(Y.xD,{children:(0,l.jsxs)(Y.SC,{children:[(0,l.jsx)(Y.ss,{className:"w-[200px]",children:"Workflow Name"}),(0,l.jsx)(Y.ss,{className:"w-[200px]",children:"Run ID"}),(0,l.jsx)(Y.ss,{className:"w-[100px]",children:"Status"}),(0,l.jsx)(Y.ss,{className:"w-[180px]",children:"Started At"}),(0,l.jsx)(Y.ss,{className:"w-[120px]",children:"Duration"}),(0,l.jsx)(Y.ss,{className:"w-[80px]",children:"Actions"})]})}),(0,l.jsx)(Y.RM,{children:z?(0,l.jsx)(Y.SC,{children:(0,l.jsx)(Y.pj,{colSpan:6,className:"text-center py-8",children:"Loading..."})}):0===er.length?(0,l.jsx)(Y.SC,{children:(0,l.jsx)(Y.pj,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No runs found"})}):er.map(s=>{var t;return(0,l.jsxs)(Y.SC,{children:[(0,l.jsx)(Y.pj,{className:"font-medium",children:(null===(t=s.workflow)||void 0===t?void 0:t.name)||"Unknown"}),(0,l.jsx)(Y.pj,{className:"font-mono text-sm",children:s.id}),(0,l.jsx)(Y.pj,{children:K(s.status)}),(0,l.jsx)(Y.pj,{children:new Date(s.startedAt).toLocaleString()}),(0,l.jsx)(Y.pj,{children:$(s.startedAt,s.completedAt)}),(0,l.jsx)(Y.pj,{children:(0,l.jsx)(I.z,{variant:"ghost",size:"sm",onClick:()=>e.push("/runs/".concat(s.id)),children:(0,l.jsx)(v.Z,{className:"h-4 w-4"})})})]},s.id)})})]})})]})]})})]}),(0,l.jsx)(U.nU,{value:"scheduler",children:(0,l.jsx)(H,{})}),(0,l.jsx)(U.nU,{value:"workflows",children:(0,l.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,l.jsxs)(V.Zb,{children:[(0,l.jsx)(V.Ol,{children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(V.ll,{children:"Workflows"}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[Z.length>0&&(0,l.jsxs)(I.z,{variant:"destructive",size:"sm",onClick:es,disabled:W,children:[(0,l.jsx)(p.Z,{className:"mr-2 h-4 w-4"}),W?"Deleting...":"Delete ".concat(Z.length)]}),(0,l.jsxs)(I.z,{variant:"outline",size:"sm",onClick:()=>e.push("/workflow/new"),children:[(0,l.jsx)(o.Z,{className:"mr-2 h-4 w-4"}),"Create Workflow"]})]})]})}),(0,l.jsx)(V.aY,{children:(0,l.jsx)("div",{className:"space-y-4",children:D.length>0?(0,l.jsx)("div",{className:"space-y-2",children:D.map(s=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)("button",{onClick:()=>ee(s.id),className:"text-muted-foreground hover:text-foreground",children:Z.includes(s.id)?(0,l.jsx)(w,{className:"h-4 w-4"}):(0,l.jsx)(y,{className:"h-4 w-4"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-medium",children:s.name}),(0,l.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Version ",s.version," â€¢ ",s.nodes.length," nodes"]})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(I.z,{variant:"ghost",size:"sm",onClick:()=>e.push("/workflow/".concat(s.id)),children:(0,l.jsx)(v.Z,{className:"h-4 w-4"})}),(0,l.jsx)(I.z,{variant:"ghost",size:"sm",onClick:()=>et(s.id),children:(0,l.jsx)(m,{className:"h-4 w-4"})}),(0,l.jsx)(I.z,{variant:"ghost",size:"sm",onClick:()=>e.push("/workflow/new?id=".concat(s.id)),children:(0,l.jsx)(N,{className:"h-4 w-4"})})]})]},s.id))}):(0,l.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No workflows found. Create your first workflow to get started."})})})]})})})]})})]})}},83:function(e,s,t){"use strict";var r=t(7294),l="function"==typeof Object.is?Object.is:function(e,s){return e===s&&(0!==e||1/e==1/s)||e!=e&&s!=s},a=r.useState,n=r.useEffect,i=r.useLayoutEffect,c=r.useDebugValue;function o(e){var s=e.getSnapshot;e=e.value;try{var t=s();return!l(e,t)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,s){return s()}:function(e,s){var t=s(),r=a({inst:{value:t,getSnapshot:s}}),l=r[0].inst,d=r[1];return i(function(){l.value=t,l.getSnapshot=s,o(l)&&d({inst:l})},[e,t,s]),n(function(){return o(l)&&d({inst:l}),e(function(){o(l)&&d({inst:l})})},[e]),c(t),t};s.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:d},6251:function(e,s,t){"use strict";var r=t(7294),l=t(1688),a="function"==typeof Object.is?Object.is:function(e,s){return e===s&&(0!==e||1/e==1/s)||e!=e&&s!=s},n=l.useSyncExternalStore,i=r.useRef,c=r.useEffect,o=r.useMemo,d=r.useDebugValue;s.useSyncExternalStoreWithSelector=function(e,s,t,r,l){var u=i(null);if(null===u.current){var x={hasValue:!1,value:null};u.current=x}else x=u.current;var h=n(e,(u=o(function(){function e(e){if(!c){if(c=!0,n=e,e=r(e),void 0!==l&&x.hasValue){var s=x.value;if(l(s,e))return i=s}return i=e}if(s=i,a(n,e))return s;var t=r(e);return void 0!==l&&l(s,t)?(n=e,s):(n=e,i=t)}var n,i,c=!1,o=void 0===t?null:t;return[function(){return e(s())},null===o?void 0:function(){return e(o())}]},[s,t,r,l]))[0],u[1]);return c(function(){x.hasValue=!0,x.value=h},[h]),d(h),h}},1688:function(e,s,t){"use strict";e.exports=t(83)},7738:function(e,s,t){"use strict";e.exports=t(6251)},3973:function(e,s,t){"use strict";t.d(s,{M:function(){return l}});let r=e=>{let s;let t=new Set,r=(e,r)=>{let l="function"==typeof e?e(s):e;if(!Object.is(l,s)){let e=s;s=(null!=r?r:"object"!=typeof l||null===l)?l:Object.assign({},s,l),t.forEach(t=>t(s,e))}},l=()=>s,a={setState:r,getState:l,getInitialState:()=>n,subscribe:e=>(t.add(e),()=>t.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},n=s=e(r,l,a);return a},l=e=>e?r(e):r}},function(e){e.O(0,[94,298,353,591,244,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);