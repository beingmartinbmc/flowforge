(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return l(5423)}])},493:function(e,s,l){"use strict";l.d(s,{Z:function(){return t}});let t=(0,l(3759).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},4270:function(e,s,l){"use strict";l.d(s,{Z:function(){return t}});let t=(0,l(3759).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5423:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return E}});var t=l(5893),a=l(7294),n=l(1163),i=l(9681),r=l(9200),c=l(4270),o=l(3759);let d=(0,o.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),x=(0,o.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),h=(0,o.Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),u=(0,o.Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);var m=l(493),j=l(39),f=l(7864);let w=(0,o.Z)("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),p=(0,o.Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);var v=l(5928),N=l(4976),y=l(2798),k=l(837),g=l(6501),b=l(8778),C=l(9346),S=l(4109),D=l(8860),R=l(4350),Z=l(2378),z=l(1571);function E(){let e=(0,n.useRouter)(),{theme:s,setTheme:l}=(0,z.F)(),{user:o,logout:E}=(0,k.a)(),[A,F]=(0,a.useState)({totalWorkflows:0,totalRuns:0,successRate:0,avgTaskDuration:0}),[M,L]=(0,a.useState)([]),[T,W]=(0,a.useState)([]),[P,_]=(0,a.useState)(!0),[I,O]=(0,a.useState)({workflow:"",status:"",search:""}),[Q,V]=(0,a.useState)([]),[U,Y]=(0,a.useState)(!1);(0,a.useEffect)(()=>{G()},[]);let G=async()=>{try{var e;_(!0);let[s,l,t]=await Promise.all([y.x.getRuns(void 0,1,10),y.x.getWorkflows(1,100),y.x.getSystemMetrics()]);L((null==s?void 0:s.data)||[]),W((null==l?void 0:l.data)||[]),F({totalWorkflows:(null==l?void 0:null===(e=l.data)||void 0===e?void 0:e.length)||0,totalRuns:(null==t?void 0:t.totalRuns)||0,successRate:(null==t?void 0:t.successRate)||0,avgTaskDuration:(null==t?void 0:t.avgTaskDuration)||0})}catch(e){console.error("Failed to load dashboard data:",e),L([]),W([]),F({totalWorkflows:0,totalRuns:0,successRate:0,avgTaskDuration:0})}finally{_(!1)}},q=e=>{let s={SUCCESS:{color:"bg-green-500",text:"Success"},RUNNING:{color:"bg-yellow-500",text:"Running"},FAILED:{color:"bg-red-500",text:"Failed"},PENDING:{color:"bg-gray-500",text:"Pending"},CANCELED:{color:"bg-gray-400",text:"Canceled"}},l=s[e]||s.PENDING;return(0,t.jsx)(S.C,{className:"".concat(l.color," text-white"),children:l.text})},B=(e,s)=>{if(!s)return"Running...";let l=Math.floor((new Date(s).getTime()-new Date(e).getTime())/1e3);return l<60?"".concat(l,"s"):"".concat(Math.floor(l/60),"m ").concat(l%60,"s")},H=e=>{V(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},X=async()=>{if(0!==Q.length&&confirm("Are you sure you want to delete ".concat(Q.length," workflow(s)? This action cannot be undone.")))try{Y(!0),await y.x.deleteWorkflows(Q),g.Am.success("Successfully deleted ".concat(Q.length," workflow(s)")),V([]),G()}catch(e){console.error("Failed to delete workflows:",e),g.Am.error("Failed to delete workflows")}finally{Y(!1)}},J=(M||[]).filter(e=>{var s;return(!I.workflow||"all"===I.workflow||(null===(s=e.workflow)||void 0===s?void 0:s.name)===I.workflow)&&(!I.status||"all"===I.status||e.status===I.status)&&(!I.search||!!e.id.toLowerCase().includes(I.search.toLowerCase()))});return(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)("header",{className:"border-b border-border/40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,t.jsxs)("div",{className:"container flex h-16 items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"FlowForge"}),(0,t.jsx)(b.z,{variant:"outline",size:"sm",onClick:()=>l("dark"===s?"light":"dark"),children:"dark"===s?"\uD83C\uDF1E":"\uD83C\uDF19"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(b.z,{variant:"outline",size:"sm",onClick:()=>e.push("/dlq"),children:[(0,t.jsx)(r.Z,{className:"mr-2 h-4 w-4"}),"Dead Letter Queue"]}),(0,t.jsxs)(b.z,{variant:"outline",size:"sm",onClick:()=>e.push("/workflow/new"),children:[(0,t.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"Create Workflow"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[(0,t.jsx)(d,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:null==o?void 0:o.email})]}),(0,t.jsxs)(b.z,{variant:"outline",size:"sm",onClick:E,children:[(0,t.jsx)(x,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]})}),(0,t.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,t.jsxs)(C.Zb,{children:[(0,t.jsxs)(C.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(C.ll,{className:"text-sm font-medium",children:"Total Workflows"}),(0,t.jsx)(h,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(C.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:A.totalWorkflows}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Active workflows"})]})]})}),(0,t.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,t.jsxs)(C.Zb,{children:[(0,t.jsxs)(C.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(C.ll,{className:"text-sm font-medium",children:"Total Runs"}),(0,t.jsx)(u,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(C.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:A.totalRuns}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"All time executions"})]})]})}),(0,t.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,t.jsxs)(C.Zb,{children:[(0,t.jsxs)(C.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(C.ll,{className:"text-sm font-medium",children:"Success Rate"}),(0,t.jsx)(m.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(C.aY,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[A.successRate.toFixed(1),"%"]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Successful executions"})]})]})}),(0,t.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:(0,t.jsxs)(C.Zb,{children:[(0,t.jsxs)(C.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(C.ll,{className:"text-sm font-medium",children:"Avg Task Duration"}),(0,t.jsx)(j.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(C.aY,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[A.avgTaskDuration.toFixed(1),"s"]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Average execution time"})]})]})})]}),(0,t.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:(0,t.jsxs)(C.Zb,{children:[(0,t.jsx)(C.Ol,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(C.ll,{children:"Workflows"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[Q.length>0&&(0,t.jsxs)(b.z,{variant:"destructive",size:"sm",onClick:X,disabled:U,children:[(0,t.jsx)(f.Z,{className:"mr-2 h-4 w-4"}),U?"Deleting...":"Delete ".concat(Q.length)]}),(0,t.jsxs)(b.z,{variant:"outline",size:"sm",onClick:()=>e.push("/workflow/new"),children:[(0,t.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"Create Workflow"]})]})]})}),(0,t.jsx)(C.aY,{children:(0,t.jsx)("div",{className:"space-y-4",children:T.length>0?(0,t.jsx)("div",{className:"space-y-2",children:T.map(s=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("button",{onClick:()=>H(s.id),className:"text-muted-foreground hover:text-foreground",children:Q.includes(s.id)?(0,t.jsx)(w,{className:"h-4 w-4"}):(0,t.jsx)(p,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:s.name}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Version ",s.version," â€¢ ",s.nodes.length," nodes"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(b.z,{variant:"ghost",size:"sm",onClick:()=>e.push("/workflow/".concat(s.id)),children:(0,t.jsx)(v.Z,{className:"h-4 w-4"})}),(0,t.jsx)(b.z,{variant:"ghost",size:"sm",onClick:()=>e.push("/workflow/new?id=".concat(s.id)),children:(0,t.jsx)(u,{className:"h-4 w-4"})})]})]},s.id))}):(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No workflows found. Create your first workflow to get started."})})})]})}),(0,t.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:(0,t.jsxs)(C.Zb,{children:[(0,t.jsx)(C.Ol,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(C.ll,{children:"Recent Runs"}),(0,t.jsxs)(b.z,{variant:"outline",size:"sm",onClick:G,children:[(0,t.jsx)(N.Z,{className:"mr-2 h-4 w-4"}),"Refresh"]})]})}),(0,t.jsxs)(C.aY,{children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(D.I,{placeholder:"Search by Run ID...",value:I.search,onChange:e=>O(s=>({...s,search:e.target.value})),className:"max-w-sm"})}),(0,t.jsxs)(R.Ph,{value:I.workflow,onValueChange:e=>O(s=>({...s,workflow:e})),children:[(0,t.jsx)(R.i4,{className:"w-[180px]",children:(0,t.jsx)(R.ki,{placeholder:"All Workflows"})}),(0,t.jsxs)(R.Bw,{children:[(0,t.jsx)(R.Ql,{value:"all",children:"All Workflows"}),T.map(e=>(0,t.jsx)(R.Ql,{value:e.name,children:e.name},e.id))]})]}),(0,t.jsxs)(R.Ph,{value:I.status,onValueChange:e=>O(s=>({...s,status:e})),children:[(0,t.jsx)(R.i4,{className:"w-[180px]",children:(0,t.jsx)(R.ki,{placeholder:"All Status"})}),(0,t.jsxs)(R.Bw,{children:[(0,t.jsx)(R.Ql,{value:"all",children:"All Status"}),(0,t.jsx)(R.Ql,{value:"SUCCESS",children:"Success"}),(0,t.jsx)(R.Ql,{value:"RUNNING",children:"Running"}),(0,t.jsx)(R.Ql,{value:"FAILED",children:"Failed"}),(0,t.jsx)(R.Ql,{value:"PENDING",children:"Pending"}),(0,t.jsx)(R.Ql,{value:"CANCELED",children:"Canceled"})]})]})]}),(0,t.jsx)("div",{className:"rounded-md border min-w-full overflow-x-auto",children:(0,t.jsxs)(Z.iA,{children:[(0,t.jsx)(Z.xD,{children:(0,t.jsxs)(Z.SC,{children:[(0,t.jsx)(Z.ss,{className:"w-[200px]",children:"Workflow Name"}),(0,t.jsx)(Z.ss,{className:"w-[200px]",children:"Run ID"}),(0,t.jsx)(Z.ss,{className:"w-[100px]",children:"Status"}),(0,t.jsx)(Z.ss,{className:"w-[180px]",children:"Started At"}),(0,t.jsx)(Z.ss,{className:"w-[120px]",children:"Duration"}),(0,t.jsx)(Z.ss,{className:"w-[80px]",children:"Actions"})]})}),(0,t.jsx)(Z.RM,{children:P?(0,t.jsx)(Z.SC,{children:(0,t.jsx)(Z.pj,{colSpan:6,className:"text-center py-8",children:"Loading..."})}):0===J.length?(0,t.jsx)(Z.SC,{children:(0,t.jsx)(Z.pj,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No runs found"})}):J.map(s=>{var l;return(0,t.jsxs)(Z.SC,{children:[(0,t.jsx)(Z.pj,{className:"font-medium",children:(null===(l=s.workflow)||void 0===l?void 0:l.name)||"Unknown"}),(0,t.jsx)(Z.pj,{className:"font-mono text-sm",children:s.id}),(0,t.jsx)(Z.pj,{children:q(s.status)}),(0,t.jsx)(Z.pj,{children:new Date(s.startedAt).toLocaleString()}),(0,t.jsx)(Z.pj,{children:B(s.startedAt,s.completedAt)}),(0,t.jsx)(Z.pj,{children:(0,t.jsx)(b.z,{variant:"ghost",size:"sm",onClick:()=>e.push("/runs/".concat(s.id)),children:(0,t.jsx)(v.Z,{className:"h-4 w-4"})})})]},s.id)})})]})})]})]})})]})]})}}},function(e){e.O(0,[299,681,298,353,579,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);