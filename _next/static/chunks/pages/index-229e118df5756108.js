(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return l(1769)}])},493:function(e,s,l){"use strict";l.d(s,{Z:function(){return t}});let t=(0,l(3759).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},4270:function(e,s,l){"use strict";l.d(s,{Z:function(){return t}});let t=(0,l(3759).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1769:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return D}});var t=l(5893),a=l(7294),n=l(1163),i=l(9681),r=l(9200),c=l(4270),d=l(3759);let o=(0,d.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),x=(0,d.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),u=(0,d.Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),h=(0,d.Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);var m=l(493),j=l(39),f=l(4976),p=l(5928),w=l(2798),y=l(837),N=l(8778),g=l(9346),k=l(4109),v=l(8860),b=l(4350),C=l(2378),S=l(1571);function D(){let e=(0,n.useRouter)(),{theme:s,setTheme:l}=(0,S.F)(),{user:d,logout:D}=(0,y.a)(),[E,R]=(0,a.useState)({totalWorkflows:0,totalRuns:0,successRate:0,avgTaskDuration:0}),[Z,A]=(0,a.useState)([]),[z,M]=(0,a.useState)([]),[F,L]=(0,a.useState)(!0),[P,_]=(0,a.useState)({workflow:"",status:"",search:""});(0,a.useEffect)(()=>{T()},[]);let T=async()=>{try{L(!0);let[e,s,l]=await Promise.all([w.x.getRuns(void 0,1,10),w.x.getWorkflows(1,100),w.x.getSystemMetrics()]);A(e.data),M(s.data),R({totalWorkflows:s.data.length,totalRuns:l.totalRuns||0,successRate:l.successRate||0,avgTaskDuration:l.avgTaskDuration||0})}catch(e){console.error("Failed to load dashboard data:",e)}finally{L(!1)}},I=e=>{let s={SUCCESS:{color:"bg-green-500",text:"Success"},RUNNING:{color:"bg-yellow-500",text:"Running"},FAILED:{color:"bg-red-500",text:"Failed"},PENDING:{color:"bg-gray-500",text:"Pending"},CANCELED:{color:"bg-gray-400",text:"Canceled"}},l=s[e]||s.PENDING;return(0,t.jsx)(k.C,{className:"".concat(l.color," text-white"),children:l.text})},Q=(e,s)=>{if(!s)return"Running...";let l=Math.floor((new Date(s).getTime()-new Date(e).getTime())/1e3);return l<60?"".concat(l,"s"):"".concat(Math.floor(l/60),"m ").concat(l%60,"s")},W=Z.filter(e=>{var s;return(!P.workflow||"all"===P.workflow||(null===(s=e.workflow)||void 0===s?void 0:s.name)===P.workflow)&&(!P.status||"all"===P.status||e.status===P.status)&&(!P.search||!!e.id.toLowerCase().includes(P.search.toLowerCase()))});return(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)("header",{className:"border-b border-border/40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,t.jsxs)("div",{className:"container flex h-16 items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"FlowForge"}),(0,t.jsx)(N.z,{variant:"outline",size:"sm",onClick:()=>l("dark"===s?"light":"dark"),children:"dark"===s?"\uD83C\uDF1E":"\uD83C\uDF19"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(N.z,{variant:"outline",size:"sm",onClick:()=>e.push("/dlq"),children:[(0,t.jsx)(r.Z,{className:"mr-2 h-4 w-4"}),"Dead Letter Queue"]}),(0,t.jsxs)(N.z,{variant:"outline",size:"sm",onClick:()=>e.push("/workflow/new"),children:[(0,t.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"Create Workflow"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[(0,t.jsx)(o,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:null==d?void 0:d.email})]}),(0,t.jsxs)(N.z,{variant:"outline",size:"sm",onClick:D,children:[(0,t.jsx)(x,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]})}),(0,t.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,t.jsxs)(g.Zb,{children:[(0,t.jsxs)(g.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(g.ll,{className:"text-sm font-medium",children:"Total Workflows"}),(0,t.jsx)(u,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(g.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:E.totalWorkflows}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Active workflows"})]})]})}),(0,t.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,t.jsxs)(g.Zb,{children:[(0,t.jsxs)(g.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(g.ll,{className:"text-sm font-medium",children:"Total Runs"}),(0,t.jsx)(h,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(g.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:E.totalRuns}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"All time executions"})]})]})}),(0,t.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,t.jsxs)(g.Zb,{children:[(0,t.jsxs)(g.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(g.ll,{className:"text-sm font-medium",children:"Success Rate"}),(0,t.jsx)(m.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(g.aY,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[E.successRate.toFixed(1),"%"]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Successful executions"})]})]})}),(0,t.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:(0,t.jsxs)(g.Zb,{children:[(0,t.jsxs)(g.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(g.ll,{className:"text-sm font-medium",children:"Avg Task Duration"}),(0,t.jsx)(j.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(g.aY,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[E.avgTaskDuration.toFixed(1),"s"]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Average execution time"})]})]})})]}),(0,t.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:(0,t.jsxs)(g.Zb,{children:[(0,t.jsx)(g.Ol,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(g.ll,{children:"Recent Runs"}),(0,t.jsxs)(N.z,{variant:"outline",size:"sm",onClick:T,children:[(0,t.jsx)(f.Z,{className:"mr-2 h-4 w-4"}),"Refresh"]})]})}),(0,t.jsxs)(g.aY,{children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(v.I,{placeholder:"Search by Run ID...",value:P.search,onChange:e=>_(s=>({...s,search:e.target.value})),className:"max-w-sm"})}),(0,t.jsxs)(b.Ph,{value:P.workflow,onValueChange:e=>_(s=>({...s,workflow:e})),children:[(0,t.jsx)(b.i4,{className:"w-[180px]",children:(0,t.jsx)(b.ki,{placeholder:"All Workflows"})}),(0,t.jsxs)(b.Bw,{children:[(0,t.jsx)(b.Ql,{value:"all",children:"All Workflows"}),z.map(e=>(0,t.jsx)(b.Ql,{value:e.name,children:e.name},e.id))]})]}),(0,t.jsxs)(b.Ph,{value:P.status,onValueChange:e=>_(s=>({...s,status:e})),children:[(0,t.jsx)(b.i4,{className:"w-[180px]",children:(0,t.jsx)(b.ki,{placeholder:"All Status"})}),(0,t.jsxs)(b.Bw,{children:[(0,t.jsx)(b.Ql,{value:"all",children:"All Status"}),(0,t.jsx)(b.Ql,{value:"SUCCESS",children:"Success"}),(0,t.jsx)(b.Ql,{value:"RUNNING",children:"Running"}),(0,t.jsx)(b.Ql,{value:"FAILED",children:"Failed"}),(0,t.jsx)(b.Ql,{value:"PENDING",children:"Pending"}),(0,t.jsx)(b.Ql,{value:"CANCELED",children:"Canceled"})]})]})]}),(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(C.iA,{children:[(0,t.jsx)(C.xD,{children:(0,t.jsxs)(C.SC,{children:[(0,t.jsx)(C.ss,{children:"Workflow Name"}),(0,t.jsx)(C.ss,{children:"Run ID"}),(0,t.jsx)(C.ss,{children:"Status"}),(0,t.jsx)(C.ss,{children:"Started At"}),(0,t.jsx)(C.ss,{children:"Duration"}),(0,t.jsx)(C.ss,{children:"Actions"})]})}),(0,t.jsx)(C.RM,{children:F?(0,t.jsx)(C.SC,{children:(0,t.jsx)(C.pj,{colSpan:6,className:"text-center py-8",children:"Loading..."})}):0===W.length?(0,t.jsx)(C.SC,{children:(0,t.jsx)(C.pj,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No runs found"})}):W.map(s=>{var l;return(0,t.jsxs)(C.SC,{children:[(0,t.jsx)(C.pj,{className:"font-medium",children:(null===(l=s.workflow)||void 0===l?void 0:l.name)||"Unknown"}),(0,t.jsxs)(C.pj,{className:"font-mono text-sm",children:[s.id.slice(0,8),"..."]}),(0,t.jsx)(C.pj,{children:I(s.status)}),(0,t.jsx)(C.pj,{children:new Date(s.startedAt).toLocaleString()}),(0,t.jsx)(C.pj,{children:Q(s.startedAt,s.completedAt)}),(0,t.jsx)(C.pj,{children:(0,t.jsx)(N.z,{variant:"ghost",size:"sm",onClick:()=>e.push("/runs/".concat(s.id)),children:(0,t.jsx)(p.Z,{className:"h-4 w-4"})})})]},s.id)})})]})})]})]})})]})]})}}},function(e){e.O(0,[299,681,298,246,579,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);