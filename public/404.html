<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>FlowForge</title>
    <script type="text/javascript">
      // Comprehensive SPA routing for GitHub Pages
      // Prevents all malformed URLs and only handles legitimate sub-routes
      
      (function() {
        var l = window.location;
        var path = l.pathname;
        
        // Debug logging
        console.log('404.html processing:', {
          pathname: path,
          search: l.search,
          href: l.href
        });
        
        // Only process if:
        // 1. We're not already on a query-based URL
        // 2. We have a path that starts with /flowforge/
        // 3. The path is NOT just /flowforge or /flowforge/
        if (l.search === '' && 
            path.startsWith('/flowforge/') && 
            path !== '/flowforge/' && 
            path !== '/flowforge') {
          
          // Extract the route part after /flowforge/
          var route = path.substring('/flowforge/'.length);
          
          // Only redirect if we have a valid route that's not 'flowforge'
          if (route && route.trim() !== '' && route !== 'flowforge') {
            // Create the new URL with the route as a query parameter
            var newUrl = l.protocol + '//' + l.hostname + 
                        (l.port ? ':' + l.port : '') + 
                        '/flowforge/?/' + route;
            
            console.log('404.html redirecting to:', newUrl);
            
            // Redirect to the new URL
            l.replace(newUrl);
          } else {
            console.log('404.html: Invalid route, not redirecting');
          }
        } else {
          console.log('404.html: Not processing this path');
        }
      })();
    </script>
  </head>
  <body>
    <div id="loading">Loading FlowForge...</div>
  </body>
</html>
